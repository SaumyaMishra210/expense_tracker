{% extends 'main.html' %}

{% block title %}Visualize Expenses{% endblock %}

{% block content %}
<h2>Expense Breakdown by Category</h2>
<div class="chart-container" style="width: 80%; margin: 0 auto;">
    <canvas id="expenseChart"></canvas>
</div>

<!-- Include Chart.js from CDN -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    const ctx = document.getElementById('expenseChart').getContext('2d');
    const expenseChart = new Chart(ctx, {
        type: 'pie', // Pie chart type
        data: {
            labels: {{ labels|tojson }}, // Labels from the backend
            datasets: [{
                data: {{ values|tojson }}, // Values from the backend
                backgroundColor: [
                    '#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0', '#9966FF', '#F7464A'
                ], // Colors for the pie chart
                hoverBackgroundColor: [
                    '#FF6384', '#36A2EB', '#FFCE56', '#4BC0C0', '#9966FF', '#F7464A'
                ]
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: {
                    position: 'top'
                },
                tooltip: {
                    callbacks: {
                        label: function(tooltipItem) {
                            const value = tooltipItem.raw;
                            return `â‚¹${value.toFixed(2)}`; // Use rupee symbol here
                        }
                    }
                }
            }
        }
    });
</script>
{% endblock %}
